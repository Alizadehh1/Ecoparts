@model ProfileViewModel
@{
    ViewData["Title"] = "Profile";
}
<main class="main account">
    <nav class="breadcrumb-nav">
        <div class="container">
            <ul class="breadcrumb">
                <li><a asp-action="index" asp-controller="home"><i class="d-icon-home"></i></a></li>
                <li>Account</li>
            </ul>
        </div>
    </nav>
    <div class="page-content mt-4 mb-10 pb-6">
        <div class="container">
            <h2 class="title title-center mb-10">My Account</h2>
            <div class="tab tab-vertical gutter-lg">
                <ul class="nav nav-tabs mb-4 col-lg-3 col-md-4" role="tablist">
                    <li style="cursor:pointer" class="nav-item">
                        <a class="nav-link active" onclick="tabDashboard(event)">Dashboard</a>
                    </li>
                    <li style="cursor:pointer" class="nav-item">
                        <a onclick="tabOrder(event)" class="nav-link">Orders</a>
                    </li>
                    <li style="cursor:pointer" class="nav-item">
                        <a class="nav-link" onclick="tabAccount(event)">Account details</a>
                    </li>
                    <li style="cursor:pointer;" onmouseout="this.style.color='red'" class="nav-item">
                        <a class="nav-link" asp-action="logout">Logout</a>
                    </li>
                </ul>
                <div class="tab-content col-lg-9 col-md-8">
                    <div class="tab-pane active in" id="dashboard">
                        <p class="mb-0">
                            Hello <span>@User.GetPrincipalName()</span> (not <span>@User.GetPrincipalName()</span>? <a asp-action="logout" class="text-primary">Log out</a>)
                        </p>
                        <p class="mb-8">
                            From your account dashboard you can view your <a href="#orders" class="link-to-tab text-primary">recent orders</a>, manage your shipping and billing
                            addresses,<br>and edit your password and account details.
                        </p>
                        <a href="shop.html" class="btn btn-dark btn-rounded">Go To Shop<i class="d-icon-arrow-right"></i></a>
                    </div>
                    <div class="tab-pane" id="orders">
                        <table class="order-table">
                            <thead>
                                <tr>
                                    <th class="pl-2">Order</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Total</th>
                                    <th class="pr-2">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.Order)
                                {
                                    <tr>
                                        <td class="order-number"><a href="#">#@item.Id</a></td>
                                        <td class="order-date"><time>@item.CreatedDate.ToString("MMMM MM, yyyy")</time></td>
                                        <td class="order-status">
                                            @if (item.isConfirmed)
                                            {
                                                <span>Təsdiqlənib</span>
                                            }
                                            else if (item.DeletedById != null)
                                            {
                                                <span>Ləğv olunub</span>
                                            }
                                            else
                                            {
                                                <span>Gözləmədə</span>
                                            }
                                        </td>
                                        <td class="order-total"><span>@item.TotalAmount ₼ for @item.OrderItems.Where(oi => oi.OrderId == item.Id).Count() items</span></td>
                                        <td class="order-action"><a href="#" class="btn btn-primary btn-link btn-underline">View</a></td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                    <div class="tab-pane" id="downloads">
                        <p class="mb-4 text-body">No downloads available yet.</p>
                        <a href="#" class="btn btn-primary btn-link btn-underline">Browser Products<i class="d-icon-arrow-right"></i></a>
                    </div>
                    <div class="tab-pane" id="address">
                        <p class="mb-2">
                            The following addresses will be used on the checkout page by default.
                        </p>
                        <div class="row">
                            <div class="col-sm-6 mb-4">
                                <div class="card card-address">
                                    <div class="card-body">
                                        <h5 class="card-title text-uppercase">Billing Address</h5>
                                        <p>
                                            John Doe<br>
                                            Riode Company<br>
                                            Steven street<br>
                                            El Carjon, CA 92020
                                        </p>
                                        <a href="#" class="btn btn-link btn-secondary btn-underline">Edit <i class="far fa-edit"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 mb-4">
                                <div class="card card-address">
                                    <div class="card-body">
                                        <h5 class="card-title text-uppercase">Shipping Address</h5>
                                        <p>You have not set up this type of address yet.</p>
                                        <a href="#" class="btn btn-link btn-secondary btn-underline">Edit <i class="far fa-edit"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane" id="account">
                        <div class="row">
                            <div class="col-sm-6">
                                <label>First Name</label>
                                <p class="form-control">@Model.ECoPartUser.Name</p>
                            </div>
                            <div class="col-sm-6">
                                <label>Last Name</label>
                                <p class="form-control">@Model.ECoPartUser.Surname</p>
                            </div>
                            <div class="col-sm-6">
                                <label>Əlaqə Nömrəsi</label>
                                <p class="form-control">@Model.ECoPartUser.PhoneNumber</p>
                            </div>
                            <div class="col-sm-6">
                                <label>Mağaza Adı</label>
                                <p class="form-control">@Model.ECoPartUser.StoreName</p>
                            </div>
                        </div>

                        <label>Email Address</label>
                        <p class="form-control">@Model.ECoPartUser.Email</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
@section css{
    <style>
        a.active {
            color: #26c !important;
        }
    </style>
}
@section js{
    <script>
        function tabOrder(e) {
            let tabPanes = document.querySelectorAll('.tab-pane');
            let navLink = document.querySelectorAll('.nav-link');
            for (var i = 0; i < tabPanes.length; i++) {
                $(tabPanes[i]).removeClass("active");
            }
            for (var i = 0; i < tabPanes.length; i++) {
                $(navLink[i]).removeClass("active");
            }
            let order = $('#orders');
            $(e.currentTarget).addClass("active");
            order.addClass('active');
        }
        function tabDashboard(e) {
            let tabPanes = document.querySelectorAll('.tab-pane');
            let navLink = document.querySelectorAll('.nav-link');
            for (var i = 0; i < tabPanes.length; i++) {
                $(tabPanes[i]).removeClass("active");
            }
            for (var i = 0; i < tabPanes.length; i++) {
                $(navLink[i]).removeClass("active");
            }
            let dashboard = $('#dashboard');
            $(e.currentTarget).addClass("active");
            dashboard.addClass('active');
        }
        function tabAccount(e) {
            let tabPanes = document.querySelectorAll('.tab-pane');
            let navLink = document.querySelectorAll('.nav-link');
            for (var i = 0; i < tabPanes.length; i++) {
                $(tabPanes[i]).removeClass("active");
            }
            for (var i = 0; i < tabPanes.length; i++) {
                $(navLink[i]).removeClass("active");
            }
            let account = $('#account');
            $(e.currentTarget).addClass("active");
            account.addClass('active');

        }
    </script>
}